<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Content Manager Change</title>
    <!-- Netlify CMS Script and Stylesheet -->
    <link
      href="https://cdn.jsdelivr.net/npm/netlify-cms@2.10.192/dist/cms.min.css"
      rel="stylesheet"
    />
  </head>
  <body>
    <div id="cms"></div>
    <!-- Container for CMS -->

    <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/netlify-cms@2.10.192/dist/netlify-cms.min.js"
      defer
    ></script>
    <script>
      // Wait for the DOM to be fully loaded
      document.addEventListener("DOMContentLoaded", function () {
        console.log("DOM fully loaded");

        if (typeof CMS !== "undefined") {
          console.log("CMS is defined");
          CMS.init(); // Initialize Netlify CMS
        } else {
          console.error("Netlify CMS is not loaded or defined");
        }
        if (window.netlifyIdentity) {
          window.netlifyIdentity.on("init", (user) => {
            if (!user) {
              window.netlifyIdentity.on("login", () => {
                document.location.href = "/admin/";
              });
            }
          });
        }
      });
    </script>
  </body>
</html>
